#!/bin/bash

echo "Compiling TN3270 Emulator..."

# Create bin directory
mkdir -p bin

# Compile in correct order
javac -d bin -sourcepath src \
    src/Constants.java \
    src/TerminalModels.java \
    src/EbcdicConverter.java \
    src/AddressEncoder.java \
    src/callbacks/*.java \
    src/config/*.java \
    src/terminal/*.java \
    src/protocol/*.java \
    src/ui/*.java \
    src/ui/dialogs/*.java \
    src/TN3270Emulator.java

if [ $? -eq 0 ]; then
    echo "Compilation successful!"
    echo ""
    echo "To run:"
    echo "  java -cp bin TN3270Emulator <hostname> [port] [model] [options]"
    echo ""
    echo "Example:"
    echo "  java -cp bin TN3270Emulator mainframe.example.com 23 3279-3"
else
    echo "Compilation failed!"
    exit 1
fi
